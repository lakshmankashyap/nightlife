webpackJsonp([1],{"+TuN":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[t._m(0),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"columns is-mobile is-centered"},[a("div",{staticClass:"column is-one-quarter"},[a("div",{staticClass:"field"},[a("p",{staticClass:"control has-icons-left has-icons-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.email},on:{input:function(s){s.target.composing||(t.email=s.target.value)}}}),t._v(" "),t._m(1),t._v(" "),t._m(2)])]),t._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"control has-icons-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}}),t._v(" "),t._m(3)]),t._v(" "),a("p",[a("router-link",{attrs:{to:"/signup"}},[t._v("Create a new account")])],1)]),t._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("button",{staticClass:"button is-success",on:{click:t.login}},[t._v("\n              Login\n            ")])])])])])])])},n=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("section",{staticClass:"hero"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container"},[a("h1",{staticClass:"title"},[t._v("\n        Login\n      ")]),t._v(" "),a("h2",{staticClass:"subtitle"},[t._v("\n        Type your email and password\n      ")])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-envelope"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"icon is-small is-right"},[a("i",{staticClass:"fa fa-check"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-lock"})])}],i={render:e,staticRenderFns:n};s.a=i},"1Jr9":function(t,s){},"1aks":function(t,s,a){"use strict";s.a={methods:{logout:function(){this.$store.dispatch("logout")}},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated},username:function(){return this.$store.getters.username}}}},"5W1q":function(t,s){},"9mGI":function(t,s,a){"use strict";s.a={data:function(){return{email:"",password:""}},methods:{login:function(){var t=this,s=this.email,a=this.password;this.$store.dispatch("login",{email:s,password:a}).then(function(s){t.$router.push({path:"/",query:{search:t.$store.state.search}})}).catch(function(t){console.log("error was",t)})}}}},ANe1:function(t,s){},AkXt:function(t,s){},BK5H:function(t,s,a){"use strict";s.a={props:["bar"],data:function(){return{votes:0}},computed:{imGoing:function(){var t=this;return this.bar.voters.filter(function(s){return s._user===t.$store.state.session._id}).length>0}},methods:{vote:function(){var t=this;this.$store.getters.isAuthenticated?this.$store.dispatch("vote",{bar:this.bar}).then(function(s){t.bar.voters=s.data.bar.voters,t.votes=t.bar.voters.length}).catch(function(t){console.log(t)}):this.$router.push({path:"/login"})}},created:function(){this.votes=this.bar.voters.length}}},EyJa:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[t._m(0),t._v(" "),a("div",{staticClass:"navbar-menu"},[a("div",{staticClass:"navbar-start"},[a("router-link",{staticClass:"navbar-item is-active",attrs:{to:"/",exact:""}},[t._v("Home")])],1),t._v(" "),a("div",{staticClass:"navbar-end"},[!1===t.isAuthenticated?a("router-link",{staticClass:"navbar-item",attrs:{to:"/login"}},[t._v("Login")]):t._e(),t._v(" "),!0===t.isAuthenticated?a("a",{staticClass:"navbar-item",on:{click:t.logout}},[t._v("Logout("+t._s(t.username)+")")]):t._e()],1)])])},n=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"navbar-brand"},[a("div",{staticClass:"navbar-item brand-name"},[t._v("\n      Nightlife\n    ")]),t._v(" "),a("button",{staticClass:"button navbar-burger"},[a("span"),t._v(" "),a("span"),t._v(" "),a("span")])])}],i={render:e,staticRenderFns:n};s.a=i},"FVK+":function(t,s,a){"use strict";function e(t){a("1Jr9")}var n=a("9mGI"),i=a("+TuN"),o=a("VU/8"),r=e,c=o(n.a,i.a,!1,r,null,null);s.a=c.exports},FX9o:function(t,s){},GK12:function(t,s){},IcnI:function(t,s,a){"use strict";a.d(s,"a",function(){return v});var e=a("woOf"),n=a.n(e),i=a("7+uW"),o=a("NYxO"),r=a("mtWM"),c=a.n(r),l=a("M4fF");a.n(l);i.a.use(o.a);var u=c.a.create({baseURL:"/api/"}),v=new o.a.Store({state:{session:{isAuthenticated:!1},search:""},getters:{isAuthenticated:function(t){return t.session.isAuthenticated},username:function(t){return t.session.isAuthenticated?t.session.email:""}},mutations:{setSession:function(t,s){t.session=s},removeSession:function(t){t.session=n()({},{isAuthenticated:!1})},setSearch:function(t,s){t.search=s.location}},actions:{vote:function(t,s){var a=s.bar,e=localStorage.getItem("x-auth");return u.post("/bars/vote",{bar_id:a.bar_id},{headers:{"x-auth":e}}).then(function(t){return t}).catch(function(t){throw t})},searchForBars:function(t,s){var a=s.location;if(!Object(l.isEmpty)(a)){var e=encodeURI(a);return t.commit("setSearch",{location:a}),u.get("/bars/?location="+e).then(function(t){return t}).catch(function(t){throw t})}},login:function(t,s){var a=t.commit,e=s.email,i=s.password;return u.post("/users/login",{email:e,password:i}).then(function(t){var s=n()({},t.data,{isAuthenticated:!0});return localStorage.setItem("x-auth",t.headers["x-auth"]),a("setSession",s),t}).catch(function(t){throw t})},logout:function(t){var s=localStorage.getItem("x-auth");s&&u.get("/users/logout",{headers:{"x-auth":s}}).then(function(s){localStorage.removeItem("x-auth"),t.commit("removeSession")}).catch(function(t){throw t})},createAccount:function(t,s){var a=t.commit,e=s.email,i=s.password,o=s.passwordRepeat;u.post("/users/",{email:e,password:i,passwordRepeat:o}).then(function(t){var s=n()({},t.data,{isAuthenticated:!0});return localStorage.setItem("x-auth",t.headers["x-auth"]),a("setSession",s),t}).catch(function(t){throw t})},loadSession:function(t){var s=t.commit,a=localStorage.getItem("x-auth");a&&u.get("/users/me",{headers:{"x-auth":a}}).then(function(t){var a=n()({},t.data,{isAuthenticated:!0});s("setSession",a)}).catch(function(t){throw t})}}})},IuOO:function(t,s,a){"use strict";function e(t){a("ANe1")}var n=a("BK5H"),i=a("v5o9"),o=a("VU/8"),r=e,c=o(n.a,i.a,!1,r,"data-v-623cd1af",null);s.a=c.exports},Ke8F:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{},[t._m(0),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"columns is-mobile is-centered"},[a("div",{staticClass:"column is-one-quarter"},[a("form",{on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"field"},[a("p",{staticClass:"control has-icons-left has-icons-right"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email,expression:"email",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.email},on:{input:function(s){s.target.composing||(t.email=s.target.value.trim())},blur:function(s){t.$forceUpdate()}}}),t._v(" "),t._m(1),t._v(" "),t._m(2)])]),t._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"control has-icons-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}}),t._v(" "),t._m(3)])]),t._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"control has-icons-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordRepeat,expression:"passwordRepeat"}],staticClass:"input",attrs:{type:"password",placeholder:"Repeat Password"},domProps:{value:t.passwordRepeat},on:{input:function(s){s.target.composing||(t.passwordRepeat=s.target.value)}}}),t._v(" "),t._m(4)])]),t._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("button",{staticClass:"button is-success",on:{click:t.createAccount}},[t._v("\n                Create account\n              ")])])])])])])])])},n=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("section",{staticClass:"hero"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container"},[a("h1",{staticClass:"title"},[t._v("\n        Sign Up\n      ")]),t._v(" "),a("h2",{staticClass:"subtitle"},[t._v("\n        Sign up for an account here\n      ")])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-envelope"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"icon is-small is-right"},[a("i",{staticClass:"fa fa-check"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-lock"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fa fa-lock"})])}],i={render:e,staticRenderFns:n};s.a=i},M93x:function(t,s,a){"use strict";function e(t){a("FX9o")}var n=a("xJD8"),i=a("MTSB"),o=a("VU/8"),r=e,c=o(n.a,i.a,!1,r,null,null);s.a=c.exports},MTSB:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"container"},[a("navbar")],1),t._v(" "),a("router-view")],1)},n=[],i={render:e,staticRenderFns:n};s.a=i},NHnr:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("7+uW"),n=a("M93x"),i=a("YaEn"),o=a("IcnI"),r=a("GK12"),c=(a.n(r),a("5W1q"));a.n(c);e.a.config.productionTip=!1,new e.a({el:"#app",router:i.a,store:o.a,template:"<App/>",components:{App:n.a}})},NvpC:function(t,s){},RRXJ:function(t,s,a){"use strict";var e=a("IuOO");s.a={components:{bar:e.a},props:["bars"]}},XbSg:function(t,s,a){"use strict";s.a={data:function(){return{email:"",password:"",passwordRepeat:""}},methods:{createAccount:function(){var t=this,s=this.email,a=this.password,e=this.passwordRepeat;this.$store.dispatch("createAccount",{email:s,password:a,passwordRepeat:e}).then(function(s){t.$router.push({path:"/"})}).catch(function(t){console.log(t)})}}}},YaEn:function(t,s,a){"use strict";var e=a("7+uW"),n=a("/ocq"),i=a("c2aI"),o=a("FVK+"),r=a("c3Kc");e.a.use(n.a),s.a=new n.a({routes:[{path:"/",name:"HomePage",component:i.a},{path:"/login",name:"LoginPage",component:o.a},{path:"/signup",name:"SignUpPage",component:r.a}],mode:"history"})},c2aI:function(t,s,a){"use strict";function e(t){a("vD3C")}var n=a("c75f"),i=a("tLto"),o=a("VU/8"),r=e,c=o(n.a,i.a,!1,r,"data-v-19025cd4",null);s.a=c.exports},c3Kc:function(t,s,a){"use strict";function e(t){a("AkXt")}var n=a("XbSg"),i=a("Ke8F"),o=a("VU/8"),r=e,c=o(n.a,i.a,!1,r,null,null);s.a=c.exports},c75f:function(t,s,a){"use strict";var e=a("wjpa");s.a={name:"Home",components:{barList:e.a},data:function(){return{msg:"Welcome to Your Nightlife Coordination App",bars:[],location:"San francisco",isLoading:!1}},methods:{searchForBars:function(){var t=this;this.bars=[],this.isLoading=!0,this.$store.dispatch("searchForBars",{location:this.location}).then(function(s){t.bars=s.data,t.isLoading=!1}).catch(function(t){return console.log(t)})}},created:function(){var t=this.$route.query.search;t&&(this.location=t),this.searchForBars()}}},hAeG:function(t,s,a){"use strict";function e(t){a("hgff")}var n=a("1aks"),i=a("EyJa"),o=a("VU/8"),r=e,c=o(n.a,i.a,!1,r,null,null);s.a=c.exports},hgff:function(t,s){},jYhV:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",t._l(t.bars,function(t){return a("bar",{key:t.bar_id,attrs:{bar:t}})}))},n=[],i={render:e,staticRenderFns:n};s.a=i},tLto:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("section",{staticClass:"hero is-link"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-one-third is-left"},[a("h1",[t._v(t._s(t.msg))])]),t._v(" "),a("div",{staticClass:"column"},[a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.location,expression:"location"}],staticClass:"input",attrs:{type:"text",placeholder:"Type your location, ex: San Francisco"},domProps:{value:t.location},on:{input:function(s){s.target.composing||(t.location=s.target.value)}}})]),t._v(" "),a("div",{staticClass:"control"},[a("a",{staticClass:"button is-info",class:{"is-loading":t.isLoading},on:{click:t.searchForBars}},[t._v("\n                  Search for bars\n                ")])])])])])])])]),t._v(" "),a("section",{staticClass:"section"},[a("div",{staticClass:"container"},[a("bar-list",{attrs:{bars:t.bars}})],1)])])},n=[],i={render:e,staticRenderFns:n};s.a=i},v5o9:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"box"},[a("article",{staticClass:"media"},[a("div",{staticClass:"media-left"},[a("figure",{staticClass:"image is-64x64"},[a("img",{attrs:{src:t.bar.image_url,alt:"Image"}})])]),t._v(" "),a("div",{staticClass:"media-content"},[a("div",{staticClass:"content"},[a("p",[a("strong",[t._v(t._s(t.bar.name))]),t._v(" "),a("small",[t._v("@"+t._s(t.bar.bar_id))])])]),t._v(" "),a("nav",{staticClass:"level is-mobile"},[a("div",{staticClass:"level-left"},[a("a",{staticClass:"level-item ",class:{"is-going":t.imGoing},on:{click:t.vote}},[t._m(0)]),t._v(" "),a("span",{attrs:{title:"Going"}},[t._v("("+t._s(t.votes)+")")])])])])])])},n=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fa fa-heart",attrs:{title:"I'm Going"}})])}],i={render:e,staticRenderFns:n};s.a=i},vD3C:function(t,s){},wjpa:function(t,s,a){"use strict";function e(t){a("NvpC")}var n=a("RRXJ"),i=a("jYhV"),o=a("VU/8"),r=e,c=o(n.a,i.a,!1,r,null,null);s.a=c.exports},xJD8:function(t,s,a){"use strict";var e=a("hAeG");s.a={name:"app",components:{navbar:e.a},beforeCreate:function(){this.$store.dispatch("loadSession")}}}},["NHnr"]);
//# sourceMappingURL=app.444690989b8450351e41.js.map